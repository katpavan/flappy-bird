<!doctype html> 
<html lang="en"> 
<head> 
    <meta charset="UTF-8" />
    <title>Making your first Phaser 3 Game - Part 10</title>
    <script src="//cdn.jsdelivr.net/npm/phaser@3.11.0/dist/phaser.js"></script>
    <style type="text/css">
        body {
            margin: 0;
        }
    </style>
</head>
<body>

<script type="text/javascript">

var config = {
    type: Phaser.AUTO,
    width: 400,
    height: 490,
    backgroundColor: '#71c5cf',
    physics: {
        default: 'arcade',
        arcade: {
            gravity: { y: 1000 },
            debug: false
        }
    },
    scene: {
        preload: preload,
        create: create,
        update: update,
    }
};

var game = new Phaser.Game(config);

function preload ()
{
    this.load.image('bird', 'assets/bird.png');

    this.load.image('pipe', 'assets/pipe.png');
}

function create ()
{
	this.bird = this.physics.add.sprite(100, 245, 'bird');
	//  Create a few crates

	//https://phaser.io/examples/v3/view/physics/arcade/group-vs-group
		//quantity doesnt work though lol
		var groupConfig = {
		    key: 'pipe',
		    quantity: 4,
		    bounceX: 1,
		    bounceY: 1,
		    collideWorldBounds: true,
		    velocityX: -150,
		    velocityY: -200
		}
		this.pipes = this.physics.add.group();

	sprite = this.physics.add.image(400, 300, 'pipe');

	//not staying put
	//not moving to the left
	// https://photonstorm.github.io/phaser3-docs/Phaser.Physics.Arcade.Sprite.html
	sprite.setVelocity(-200, 0).setCollideWorldBounds(true).setGravityY(0);

	//  Input Events
	//	using this in the update function
	this.cursors = this.input.keyboard.createCursorKeys();
}

function update ()
{


    if (this.cursors.space.isDown)
    {
    	this.bird.setVelocityY(-350);
    }
    else if (this.cursors.up.isDown)
    {
    	console.log('shooting')
    }

    //restart
    if (this.bird.y < 0 || this.bird.y > 490){

        this.registry.destroy(); // destroy registry
        this.events.off();﻿ // disable all active events
        this.scene.restart();﻿﻿﻿﻿ // restart current scene 
    }

    this.physics.world.collide(this.bird, this.pipes);

}





</script>

</body>
</html>